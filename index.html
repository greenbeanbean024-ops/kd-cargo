<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ê²½ë™íƒë°° Â· ì •ê¸°í™”ë¬¼ ìš´ì„ ê³„ì‚°ê¸°</title>
  <style>
    :root{--bg:#0b0f14;--panel:#111723;--muted:#7f8aa5;--text:#e8eef6;--brand:#4cc9f0;--accent:#80ffdb;--danger:#ff6b6b}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Pretendard,Apple SD Gothic Neo,Noto Sans KR,sans-serif;background:linear-gradient(180deg,#0b0f14,#0d1320 40%,#0b0f14);color:var(--text)}

    .wrap{max-width:1100px;margin:0 auto;padding:24px}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:18px}
    h1{font-size:clamp(18px,2.8vw,28px);margin:0;letter-spacing:-0.3px}
    .badge{font-size:12px;color:#0b0f14;background:var(--accent);padding:6px 10px;border-radius:999px;font-weight:700}

    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:16px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}

    .card{background:rgba(255,255,255,0.04);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,0.08);border-radius:16px;overflow:hidden}
    .card h2{margin:0;padding:14px 16px;border-bottom:1px solid rgba(255,255,255,0.08);font-size:16px;color:#cfe4ff}
    .card .body{padding:16px}

    .form{display:grid;grid-template-columns:repeat(6,1fr);gap:12px}
    .form label{font-size:12px;color:var(--muted)}
    .field{display:flex;flex-direction:column;gap:6px}
    .field input,.field select{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.12);background:#0f1624;color:var(--text)}
    .field input::placeholder{color:#7e8aa1}

    .span-2{grid-column:span 2}.span-3{grid-column:span 3}.span-6{grid-column:span 6}
    @media (max-width:900px){.span-3{grid-column:span 3}.span-2{grid-column:span 3}.span-6{grid-column:span 6}}

    .actions{display:flex;gap:10px;flex-wrap:wrap}
    button{appearance:none;border:0;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer}
    .primary{background:linear-gradient(135deg,var(--brand),#5ef1e6);color:#001018}
    .ghost{background:transparent;color:var(--text);border:1px solid rgba(255,255,255,0.16)}
    .switch{display:flex;align-items:center;gap:8px}

    .results{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width:720px){.results{grid-template-columns:1fr}}
    .kpi{background:#0d1422;border:1px dashed rgba(255,255,255,0.12);border-radius:14px;padding:14px}
    .kpi .label{font-size:12px;color:#9db0c9}
    .kpi .value{font-size:clamp(18px,3.2vw,28px);font-weight:800;margin-top:2px}

    .table{width:100%;border-collapse:separate;border-spacing:0 8px}
    .table th{font-size:12px;color:#9db0c9;text-align:left;padding:0 10px}
    .row{display:grid;grid-template-columns:1.2fr 1fr 1fr 1fr;gap:10px;align-items:center;background:#0e1523;border:1px solid rgba(255,255,255,0.08);border-radius:12px;padding:10px}
    @media (max-width:720px){.row{grid-template-columns:1fr 1fr;gap:8px}}
    .tag{font-size:11px;padding:4px 8px;border-radius:999px;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.08);color:#b9c7dc}
    .ok{background:rgba(128,255,219,0.12);border-color:rgba(128,255,219,0.3);color:#d6fff6}

    footer{margin-top:18px;color:#7f91ab;font-size:12px}
    .muted{color:#8fa1bb}

    /* í‘œ ì„¹ì…˜ */
    .sheet{margin-top:18px}
    details{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.08);border-radius:14px;padding:10px}
    details+details{margin-top:10px}
    summary{cursor:pointer;list-style:none;font-weight:700;color:#d6e6ff}
    summary::-webkit-details-marker{display:none}
    .scroll{overflow:auto;max-height:360px;border-top:1px dashed rgba(255,255,255,0.12);margin-top:8px;padding-top:8px}
    table.rate{width:100%;border-collapse:collapse}
    .rate th,.rate td{padding:8px 10px;border-bottom:1px solid rgba(255,255,255,0.08);text-align:right}
    .rate th:first-child,.rate td:first-child{text-align:left}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>ê²½ë™íƒë°° Â· ì •ê¸°í™”ë¬¼ ìš´ì„ ê³„ì‚°ê¸°</h1>
      <span class="badge">ê°„í¸ ëª¨ë“œ + ìš”ê¸ˆí‘œ ìš”ì•½</span>
    </header>

    <div class="grid">
      <section class="card">
        <h2>ì…ë ¥</h2>
        <div class="body">
          <div class="form">
            <div class="field span-6 switch">
              <input type="checkbox" id="easy" />
              <label for="easy"><strong>ê°„í¸ ëª¨ë“œ</strong> (ê¶Œì—­ ê°€ì‚°ìœ¨ ìë™ ì„ íƒ)</label>
            </div>

            <div class="field span-2">
              <label>ê°€ë¡œ(cm)</label>
              <input type="number" id="w" placeholder="ì˜ˆ: 40" min="0" step="0.1" />
            </div>
            <div class="field span-2">
              <label>ì„¸ë¡œ(cm)</label>
              <input type="number" id="l" placeholder="ì˜ˆ: 40" min="0" step="0.1" />
            </div>
            <div class="field span-2">
              <label>ë†’ì´(cm)</label>
              <input type="number" id="h" placeholder="ì˜ˆ: 40" min="0" step="0.1" />
            </div>

            <div class="field span-3">
              <label>ì´ ì¤‘ëŸ‰(kg)</label>
              <input type="number" id="kg" placeholder="ì˜ˆ: 60" min="0" step="0.1" />
            </div>
            <div class="field span-3" id="distWrap">
              <label>ê±°ë¦¬ ê°€ì‚°(%) Â· íƒë°°ì—ë§Œ ì ìš©</label>
              <input type="number" id="dist" placeholder="ì˜ˆ: 25 (ìˆ˜ë„ê¶Œâ†’ê²½ë‚¨)" min="0" step="1" />
            </div>

            <div class="field span-6" id="routeWrap" style="display:none">
              <label>ê¶Œì—­ ì„ íƒ(ì˜ˆì‹œìš© ê°„í¸ ê°€ì‚°ìœ¨)</label>
              <select id="route">
                <option value="">ê¶Œì—­ ì„ íƒ</option>
                <option value="0">ìˆ˜ë„ê¶Œâ†”ìˆ˜ë„ê¶Œ (0%)</option>
                <option value="10">ìˆ˜ë„ê¶Œâ†”ê°•ì›(ì¼ë¶€) (10%)</option>
                <option value="15">ìˆ˜ë„ê¶Œâ†”ê°•ì›(ì¼ë¶€) (15%)</option>
                <option value="20">ìˆ˜ë„ê¶Œâ†”ì „ë¼(ì¼ë¶€) (20%)</option>
                <option value="25">ìˆ˜ë„ê¶Œâ†”ê²½ìƒ (25%)</option>
                <option value="JEJU">ì œì£¼(í•´ìƒ/ë³„ë„)</option>
              </select>
            </div>

            <div class="field span-6">
              <label>ëŒ€í˜•í™”ë¬¼ ê¸°ì¤€(ì°¸ê³ )</label>
              <div class="actions">
                <span class="tag" id="t1">í•œ ë³€ â‰¥ 100cm</span>
                <span class="tag" id="t2">ì„¸ ë³€ í•© â‰¥ 160cm</span>
                <span class="tag" id="t3">ë¬´ê²Œ â‰¥ 25kg</span>
              </div>
            </div>

            <div class="field span-6">
              <div class="actions">
                <button class="primary" id="calcBtn">ê³„ì‚°í•˜ê¸°</button>
                <button class="ghost" id="resetBtn">ì´ˆê¸°í™”</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="card">
        <h2>ê²°ê³¼</h2>
        <div class="body">
          <div class="results">
            <div class="kpi">
              <div class="label">ë¶€í”¼ (ã¤) / êµ¬ê°„</div>
              <div class="value" id="volKpi">-</div>
              <div class="muted" id="volBand"></div>
            </div>
            <div class="kpi">
              <div class="label">ë¬´ê²Œ (kg) / êµ¬ê°„</div>
              <div class="value" id="kgKpi">-</div>
              <div class="muted" id="kgBand"></div>
            </div>
          </div>

          <table class="table" style="margin-top:14px;width:100%">
            <thead>
              <tr>
                <th>êµ¬ë¶„</th>
                <th>íƒë°°</th>
                <th>ì •ê¸°í™”ë¬¼</th>
                <th>ë¹„ê³ </th>
              </tr>
            </thead>
          </table>
          <div class="row" style="margin-top:6px">
            <div><strong>A. ë¶€í”¼ ê¸°ì¤€</strong></div>
            <div id="aParcel">-</div>
            <div id="aCargo">-</div>
            <div class="muted">íƒë°°ëŠ” ê±°ë¦¬% ì ìš©</div>
          </div>
          <div class="row" style="margin-top:8px">
            <div><strong>B. ë¬´ê²Œ ê¸°ì¤€</strong></div>
            <div id="bParcel">-</div>
            <div id="bCargo">-</div>
            <div class="muted">íƒë°°ëŠ” ê±°ë¦¬% ì ìš©</div>
          </div>
          <div class="row" style="margin-top:8px">
            <div><strong>ìµœì¢… ì ìš©(ìµœëŒ€ê°’)</strong></div>
            <div id="finalParcel" class="ok">-</div>
            <div id="finalCargo" class="ok">-</div>
            <div class="muted">A/B ì¤‘ ë” ë†’ì€ ê°’</div>
          </div>
        </div>
      </section>
    </div>

    <!-- â–¼ ìš”ê¸ˆí‘œ Â· ê°€ì‚°ìœ¨ ìš”ì•½ (ë³´ê¸° ì‰½ê²Œ, í•˜ë‹¨ ê³ ì • ì„¹ì…˜) -->
    <section class="sheet">
      <details open>
        <summary>ğŸ“‘ ë¶€í”¼ ê¸°ì¤€ ìš”ê¸ˆí‘œ(ìš”ì•½)</summary>
        <div class="scroll">
          <table class="rate">
            <thead>
              <tr><th>êµ¬ê°„(ã¤ ìƒí•œ)</th><th>íƒë°°(ì›)</th><th>ì •ê¸°í™”ë¬¼(ì›)</th></tr>
            </thead>
            <tbody id="volTable"></tbody>
          </table>
        </div>
      </details>
      <details>
        <summary>âš– ë¬´ê²Œ ê¸°ì¤€ ìš”ê¸ˆí‘œ(ìš”ì•½)</summary>
        <div class="scroll">
          <table class="rate">
            <thead>
              <tr><th>êµ¬ê°„(kg ìƒí•œ)</th><th>íƒë°°(ì›)</th><th>ì •ê¸°í™”ë¬¼(ì›)</th></tr>
            </thead>
            <tbody id="kgTable"></tbody>
          </table>
        </div>
      </details>
      <details>
        <summary>ğŸ§­ ê¶Œì—­ë³„ ê±°ë¦¬ ê°€ì‚°(ê°„í¸ ì˜ˆì‹œ)</summary>
        <div class="scroll">
          <table class="rate">
            <thead>
              <tr><th>ë…¸ì„ (ì˜ˆì‹œ)</th><th>ê°€ì‚°ìœ¨</th><th>ë¹„ê³ </th></tr>
            </thead>
            <tbody>
              <tr><td>ìˆ˜ë„ê¶Œâ†”ìˆ˜ë„ê¶Œ</td><td style="text-align:right">0%</td><td>ê¸°ë³¸ ìš”ê¸ˆ</td></tr>
              <tr><td>ìˆ˜ë„ê¶Œâ†”ê°•ì›(ì¼ë¶€)</td><td>10~15%</td><td>ì§€ì ë³„ ìƒì´</td></tr>
              <tr><td>ìˆ˜ë„ê¶Œâ†”ì „ë¼(ì¼ë¶€)</td><td>20%</td><td>ì§€ì ë³„ ìƒì´</td></tr>
              <tr><td>ìˆ˜ë„ê¶Œâ†”ê²½ìƒ</td><td>25%</td><td>ì˜ˆ: ì„œìš¸â†’ë¶€ì‚°/ê²½ë‚¨</td></tr>
              <tr><td>ì œì£¼</td><td>ë³„ë„</td><td>í•´ìƒ/í•­ê³µë£Œ ë³„ë„</td></tr>
            </tbody>
          </table>
          <p class="muted" style="margin:8px 2px 0">â€» ì •í™•í•œ ë„ì‹œê°„ ê°€ì‚°ìœ¨ì€ ê³„ì•½/ì§€ì  ì—‘ì…€ ê¸°ì¤€ìœ¼ë¡œ ê°±ì‹  í•„ìš”</p>
        </div>
      </details>
    </section>

    <footer>
      â€» ë°˜ì˜¬ë¦¼ ê·œì¹™ì€ 100ì› ë‹¨ìœ„ ë°˜ì˜¬ë¦¼ì„ ê¸°ë³¸ ì ìš©í•©ë‹ˆë‹¤. ê³„ì•½ ì¡°ê±´ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    </footer>
  </div>

  <script>
    // === ìš”ê¸ˆí‘œ(ìš”ì•½) ===
    const volumeBands = [
      [20000, 3000, 1600], [30000, 3500, 2000], [40000, 4000, 2400], [50000, 4500, 2800], [60000, 5000, 3500],
      [70000, 5500, 3800], [80000, 5500, 3800], [90000, 6000, 4200], [100000, 6500, 4500], [110000, 6500, 4500],
      [120000, 7000, 4900], [130000, 7500, 5000], [140000, 8100, 5300], [150000, 8700, 5700], [160000, 9300, 6100]
    ];
    const weightBands = [
      [6, 3000, 1600], [7, 3400, 1900], [8, 3800, 2200], [9, 4200, 2500], [10, 4500, 2800],
      [20, 6000, 4200], [30, 9000, 6300], [40, 12000, 8400], [50, 15000, 10500], [60, 15000, 10500],
      [70, 15200, 10500], [80, 17100, 10600], [90, 18600, 11500], [100, 20300, 12500]
    ];

    const round100 = (v) => Math.round(v / 100) * 100;
    const fmt = (n)=> n==null||isNaN(n)?'-': n.toLocaleString('ko-KR')+'ì›';

    function findBand(value, bands){
      for(const [limit, p, c] of bands){ if(value <= limit) return {limit, parcel:p, cargo:c}; }
      const last = bands[bands.length-1];
      return {limit:last[0], parcel:last[1], cargo:last[2]};
    }

    function populateTables(){
      const volT = document.getElementById('volTable');
      const kgT = document.getElementById('kgTable');
      volT.innerHTML = volumeBands.map(([lim,p,c])=>`<tr><td>${lim.toLocaleString('ko-KR')}</td><td>${p.toLocaleString('ko-KR')}</td><td>${c.toLocaleString('ko-KR')}</td></tr>`).join('');
      kgT.innerHTML = weightBands.map(([lim,p,c])=>`<tr><td>${lim}</td><td>${p.toLocaleString('ko-KR')}</td><td>${c.toLocaleString('ko-KR')}</td></tr>`).join('');
    }

    function calc(){
      const w = parseFloat(document.getElementById('w').value||0);
      const l = parseFloat(document.getElementById('l').value||0);
      const h = parseFloat(document.getElementById('h').value||0);
      const kg = parseFloat(document.getElementById('kg').value||0);
      const easy = document.getElementById('easy').checked;
      let dist = parseFloat(document.getElementById('dist').value||0);

      if(easy){
        const r = document.getElementById('route').value;
        if(r === 'JEJU'){
          alert('ì œì£¼ëŠ” í•´ìƒ/í•­ê³µ ë³„ë„ ìš”ìœ¨ì…ë‹ˆë‹¤. ì§€ì  ê³„ì•½í‘œë¥¼ ë°˜ì˜í•˜ì„¸ìš”.');
          dist = 0;
        } else if(r){
          dist = parseFloat(r);
        }
      }

      const vol = w*l*h; // ã¤
      const volBand = findBand(vol, volumeBands);
      const kgBand  = findBand(kg, weightBands);

      // íƒë°°ëŠ” ê±°ë¦¬ ê°€ì‚° ì ìš©
      const aParcel = round100(volBand.parcel * (1 + dist/100));
      const bParcel = round100(kgBand.parcel * (1 + dist/100));

      // ì •ê¸°í™”ë¬¼: ì˜ˆì‹œìƒ ê°€ì‚° ë¯¸ì ìš©
      const aCargo = volBand.cargo;
      const bCargo = kgBand.cargo;

      const finalParcel = Math.max(aParcel, bParcel);
      const finalCargo  = Math.max(aCargo, bCargo);

      // KPI
      document.getElementById('volKpi').textContent = vol? (vol.toLocaleString('ko-KR') + ' ã¤') : '-';
      document.getElementById('kgKpi').textContent  = kg? (kg.toLocaleString('ko-KR') + ' kg') : '-';
      document.getElementById('volBand').textContent = vol? `ë°´ë“œ ìƒí•œ: ${volBand.limit.toLocaleString('ko-KR')}ã¤ Â· ê¸°ë³¸íƒë°° ${volBand.parcel.toLocaleString('ko-KR')}ì› / ì •ê¸° ${volBand.cargo.toLocaleString('ko-KR')}ì›` : '';
      document.getElementById('kgBand').textContent  = kg? `ë°´ë“œ ìƒí•œ: ${kgBand.limit}kg Â· ê¸°ë³¸íƒë°° ${kgBand.parcel.toLocaleString('ko-KR')}ì› / ì •ê¸° ${kgBand.cargo.toLocaleString('ko-KR')}ì›` : '';

      // í‘œ
      document.getElementById('aParcel').textContent = fmt(aParcel);
      document.getElementById('aCargo').textContent  = fmt(aCargo);
      document.getElementById('bParcel').textContent = fmt(bParcel);
      document.getElementById('bCargo').textContent  = fmt(bCargo);
      document.getElementById('finalParcel').textContent = fmt(finalParcel);
      document.getElementById('finalCargo').textContent  = fmt(finalCargo);

      // ëŒ€í˜•í™”ë¬¼ íƒœê·¸
      const sumEdge = w + l + h;
      toggleTag('t1', Math.max(w,l,h) >= 100);
      toggleTag('t2', sumEdge >= 160);
      toggleTag('t3', kg >= 25);
    }

    function toggleTag(id, on){
      const el = document.getElementById(id);
      el.classList.remove('ok');
      if(on) el.classList.add('ok');
    }

    // ê°„í¸ ëª¨ë“œ í† ê¸€
    document.getElementById('easy').addEventListener('change', (e)=>{
      const on = e.target.checked;
      document.getElementById('routeWrap').style.display = on? 'block':'none';
      document.getElementById('distWrap').style.display  = on? 'none':'block';
    });

    document.getElementById('calcBtn').addEventListener('click', calc);
    document.getElementById('resetBtn').addEventListener('click', ()=>{
      for(const id of ['w','l','h','kg','dist']) document.getElementById(id).value='';
      document.getElementById('route').value='';
      for(const id of ['volKpi','kgKpi','volBand','kgBand','aParcel','aCargo','bParcel','bCargo','finalParcel','finalCargo'])
        document.getElementById(id).textContent='-';
      ['t1','t2','t3'].forEach(i=>document.getElementById(i).classList.remove('ok'));
    });

    // ë°ëª¨ ê°’ ì„¸íŒ…
    function demo(){
      document.getElementById('w').value = 40;
      document.getElementById('l').value = 40;
      document.getElementById('h').value = 40;
      document.getElementById('kg').value = 60;
      document.getElementById('dist').value = 25;
      populateTables();
      calc();
    }
    demo();
  </script>
</body>
</html>
